# í”„ë¡œì íŠ¸: AI Moderator - Task Breakdown

> í”„ë¡œì íŠ¸: AI Moderator
>
> ë‹¨ê³„: Stage 8 - Task Breakdown
>
> ë²„ì „: v1.0
>
> ê¸°ë°˜ ë¬¸ì„œ: 07B-01_project_blueprint.md, 02D-01_tech_stack_decision.md

------

## 1. ê°œìš”

- **ì´ Task ìˆ˜**: 6ê°œ
- **ì˜ˆìƒ ì´ ì‹œê°„**: ì•½ 18~20ì‹œê°„
- **í•µì‹¬ ê²½ë¡œ (Critical Path)**: T001 â†’ T003 â†’ T004 â†’ T005 â†’ T006
  - *ë„ë©”ì¸ ëª¨ë¸ â†’ ì˜¤ë””ì˜¤ ìˆ˜ì§‘ â†’ STT ë³€í™˜ â†’ LLM ë¶„ì„ â†’ í†µí•©*

------

## 2. Phase 1: Easy (ê¸°ë°˜ ë„ë©”ì¸ & ì¸í”„ë¼)

> **ëª©í‘œ**: ë°ì´í„° ëª¨ë¸ì„ ì •ì˜í•˜ê³ , ê¸°ë³¸ CRUD APIë¥¼ í†µí•´ íšŒì˜ì‹¤ ìƒì„± ë° ì…ì¥ì´ ê°€ëŠ¥í•œ ìƒíƒœë¥¼ ë§Œë“­ë‹ˆë‹¤.

| **ID**   | **Task ëª…**                            | **ë‚œì´ë„** | **ì˜ˆìƒ ì‹œê°„** | **ì˜ì¡´ì„±**    |
| -------- | -------------------------------------- | ---------- | ------------- | ------------- |
| **T001** | **ë„ë©”ì¸ ì—”í‹°í‹° êµ¬í˜„ ë° ë§ˆì´ê·¸ë ˆì´ì…˜** | Easy       | 3h            | DNA(DB)       |
| **T002** | **íšŒì˜ì‹¤ API & ì—°ê²° ê´€ë¦¬ì êµ¬í˜„**      | Easy       | 3h            | T001, DNA(WS) |

------

## 3. Phase 2: Intermediate (í•µì‹¬ íŒŒì´í”„ë¼ì¸ - ìˆ˜ì§‘ & ë³€í™˜)

> **ëª©í‘œ**: ì˜¤ë””ì˜¤ ë°ì´í„°ë¥¼ ë°›ì•„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜(STT)í•˜ëŠ” ë¹„ë™ê¸° íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

| **ID**   | **Task ëª…**                               | **ë‚œì´ë„** | **ì˜ˆìƒ ì‹œê°„** | **ì˜ì¡´ì„±** |
| -------- | ----------------------------------------- | ---------- | ------------- | ---------- |
| **T003** | **ì˜¤ë””ì˜¤ ìˆ˜ì§‘ ë° íì‰ (Audio Ingestion)** | Medium     | 3h            | T002       |
| **T004** | **Google Cloud STT ìŠ¤íŠ¸ë¦¬ë° ì—°ë™**        | High       | 4h            | T003       |

------

## 4. Phase 3: Final (AI ë¶„ì„ & í†µí•©)

> **ëª©í‘œ**: ë³€í™˜ëœ í…ìŠ¤íŠ¸ë¥¼ Geminiê°€ ë¶„ì„í•˜ê³ , ê²°ê³¼ë¥¼ WebSocketìœ¼ë¡œ ì „ì†¡í•˜ì—¬ ì‹œìŠ¤í…œì„ ì™„ì„±í•©ë‹ˆë‹¤.

| **ID**   | **Task ëª…**                            | **ë‚œì´ë„** | **ì˜ˆìƒ ì‹œê°„** | **ì˜ì¡´ì„±** |
| -------- | -------------------------------------- | ---------- | ------------- | ---------- |
| **T005** | **Gemini ì‹¤ì‹œê°„ ì¸ì‚¬ì´íŠ¸ ì„œë¹„ìŠ¤ êµ¬í˜„** | High       | 3h            | T004       |
| **T006** | **WebSocket í†µí•© ë° E2E í…ŒìŠ¤íŠ¸**       | Medium     | 3h            | T005       |

------

## 5. Task ìƒì„¸ ëª…ì„¸

ê° TaskëŠ” AIê°€ ë…ë¦½ì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì…ì¶œë ¥ê³¼ ì œì•½ì‚¬í•­ì„ ëª…í™•íˆ ì •ì˜í•©ë‹ˆë‹¤.

### ğŸ“Œ T001: ë„ë©”ì¸ ì—”í‹°í‹° êµ¬í˜„ ë° ë§ˆì´ê·¸ë ˆì´ì…˜

- **ëª©í‘œ**: `User`, `MeetingRoom`, `Transcript`, `AiInsight` 4ê°œ í•µì‹¬ ì—”í‹°í‹°ë¥¼ `SQLAlchemy` ëª¨ë¸ë¡œ êµ¬í˜„í•˜ê³  `Alembic`ìœ¼ë¡œ í…Œì´ë¸”ì„ ìƒì„±í•œë‹¤.
- **ì…ë ¥**: Blueprint ì„¹ì…˜ 3 (ë„ë©”ì¸ ëª¨ë¸), `src/core/database`
- **ì¶œë ¥**:
  - `src/domain/models.py` (ëª¨ë“  ì—”í‹°í‹° ì •ì˜)
  - `alembic/versions/xxxx_init.py` (ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼)
  - `tests/domain/test_models.py` (CRUD ë‹¨ìœ„ í…ŒìŠ¤íŠ¸)
- **ì œì•½ ì‚¬í•­ (Constraints)**:
  - **MUST**: ëª¨ë“  IDëŠ” `UUIDv7` ë˜ëŠ” `BigInt(AutoInc)` ì‚¬ìš© (Blueprint ì¤€ìˆ˜).
  - **MUST**: `TimestampMixin`ì„ ìƒì†ë°›ì•„ ìƒì„±/ìˆ˜ì •ì¼ ìë™ ê´€ë¦¬.
  - **MUST NOT**: ë™ê¸°(Sync) ë“œë¼ì´ë²„ ì‚¬ìš© ê¸ˆì§€. (í…ŒìŠ¤íŠ¸ë„ `aiosqlite` ì‚¬ìš©).

### ğŸ“Œ T002: íšŒì˜ì‹¤ API & ì—°ê²° ê´€ë¦¬ì(ConnectionManager) ê³ ë„í™”

- **ëª©í‘œ**: íšŒì˜ì‹¤ ìƒì„±/ì¡°íšŒ REST APIë¥¼ êµ¬í˜„í•˜ê³ , `src/core/websocket/manager.py`ë¥¼ í™•ì¥í•˜ì—¬ ë°©(Room) ë‹¨ìœ„ ë©€í‹°ìºìŠ¤íŒ…ì„ ì§€ì›í•œë‹¤.
- **ì…ë ¥**: Blueprint ì„¹ì…˜ 4 (API), `src/core/websocket`
- **ì¶œë ¥**:
  - `src/api/routes/rooms.py` (íšŒì˜ì‹¤ API)
  - `src/domain/services/room_service.py` (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
  - `src/core/websocket/manager.py` (ìˆ˜ì •: ë°©ë³„ User ê´€ë¦¬ ë¡œì§ ì¶”ê°€)
- **ì œì•½ ì‚¬í•­**:
  - **MUST**: `ConnectionManager`ëŠ” ë©”ëª¨ë¦¬ ë‚´(`dict`)ì—ì„œë§Œ ìƒíƒœë¥¼ ê´€ë¦¬ (No-Redis).
  - **MUST**: ë°©ì¥ì´ íšŒì˜ ì¢…ë£Œ(`PATCH /close`) ì‹œ í•´ë‹¹ ë°©ì˜ ëª¨ë“  WebSocket ì—°ê²°ì„ ê°•ì œ ì¢…ë£Œì‹œí‚¤ëŠ” ë¡œì§ í¬í•¨.

### ğŸ“Œ T003: ì˜¤ë””ì˜¤ ìˆ˜ì§‘ ë° íì‰ (Audio Ingestion)

- **ëª©í‘œ**: WebSocketìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ë°”ì´ë„ˆë¦¬ ì˜¤ë””ì˜¤ ì²­í¬ë¥¼ ë°›ì•„, ì‚¬ìš©ìë³„ `asyncio.Queue`ì— ë²„í¼ë§í•˜ëŠ” ë¡œì§ì„ êµ¬í˜„í•œë‹¤.
- **ì…ë ¥**: `src/core/websocket`, ì˜¤ë””ì˜¤ ìƒ˜í”Œ ë°ì´í„°
- **ì¶œë ¥**:
  - `src/domain/services/audio_service.py`
  - `src/api/endpoints/websocket.py` (ì´ˆê¸° êµ¬í˜„)
- **ì œì•½ ì‚¬í•­**:
  - **MUST**: `asyncio.Queue`ë¥¼ ì‚¬ìš©í•˜ì—¬ Non-blocking ì˜¤ë””ì˜¤ ë°ì´í„° ì²˜ë¦¬.
  - **MUST**: ì˜¤ë””ì˜¤ ë°ì´í„°ê°€ ì—†ì„ ë•Œ(`Silence`)ë¥¼ ê°ì§€í•˜ëŠ” ê°„ë‹¨í•œ ë¡œì§(VAD Placeholder) í¬í•¨.

### ğŸ“Œ T004: Google Cloud STT ìŠ¤íŠ¸ë¦¬ë° ì—°ë™

- **ëª©í‘œ**: `AudioQueue`ì—ì„œ ë°ì´í„°ë¥¼ êº¼ë‚´ Google STT APIì— ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ì „ì†¡í•˜ê³ , ì‹¤ì‹œê°„ í…ìŠ¤íŠ¸(`is_final` ì—¬ë¶€ í¬í•¨)ë¥¼ ë°˜í™˜ë°›ëŠ”ë‹¤.
- **ì…ë ¥**: `google-cloud-speech` ë¼ì´ë¸ŒëŸ¬ë¦¬, T003 ê²°ê³¼ë¬¼
- **ì¶œë ¥**:
  - `src/infrastructure/external/google_stt.py` (STT í´ë¼ì´ì–¸íŠ¸)
  - `src/domain/services/transcription_service.py`
- **ì œì•½ ì‚¬í•­**:
  - **MUST**: `google.cloud.speech_v1.SpeechAsyncClient` ì‚¬ìš© (ë¹„ë™ê¸° í•„ìˆ˜).
  - **MUST**: ì¤‘ê°„ ê²°ê³¼(`interim_results`)ì™€ ìµœì¢… ê²°ê³¼(`final_results`)ë¥¼ êµ¬ë¶„í•˜ì—¬ ì²˜ë¦¬.
  - **MUST**: ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ìë™ ì¬ì—°ê²°(Retry) ë¡œì§ í¬í•¨.

### ğŸ“Œ T005: Gemini ì‹¤ì‹œê°„ ì¸ì‚¬ì´íŠ¸ ì„œë¹„ìŠ¤ êµ¬í˜„

- **ëª©í‘œ**: í™•ì •ëœ STT í…ìŠ¤íŠ¸(Final)ë¥¼ Gemini Pro/Flashì— ì „ì†¡í•˜ì—¬, íšŒì˜ ë§¥ë½ì— ë§ëŠ” ìš”ì•½ì´ë‚˜ ì¤‘ì¬ ë©”ì‹œì§€ë¥¼ ìƒì„±í•œë‹¤.
- **ì…ë ¥**: `google-generativeai` SDK, T004 ê²°ê³¼ë¬¼
- **ì¶œë ¥**:
  - `src/infrastructure/external/gemini_client.py`
  - `src/domain/services/insight_service.py`
- **ì œì•½ ì‚¬í•­**:
  - **MUST**: Gemini API í˜¸ì¶œ ì‹œ `stream=True` ì˜µì…˜ ì‚¬ìš© ë¶ˆí•„ìš” (ë‹¨ë¬¸ ë¶„ì„ì´ë¯€ë¡œ). ë‹¨, ì‘ë‹µ ì†ë„ë¥¼ ìœ„í•´ `async_generate_content` ì‚¬ìš©.
  - **MUST**: í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ì„ ë³„ë„ ìƒìˆ˜ë¡œ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬.
  - **MUST**: AI ì‘ë‹µì€ JSON í¬ë§·(`AiInsight` ìŠ¤í‚¤ë§ˆ)ìœ¼ë¡œ íŒŒì‹± ê°€ëŠ¥í•´ì•¼ í•¨.

### ğŸ“Œ T006: WebSocket í†µí•© ë° E2E í…ŒìŠ¤íŠ¸

- **ëª©í‘œ**: `Audio` -> `STT` -> `Gemini` -> `Client`ë¡œ ì´ì–´ì§€ëŠ” ì „ì²´ íŒŒì´í”„ë¼ì¸ì„ WebSocket ì—”ë“œí¬ì¸íŠ¸(`handle_websocket`)ì—ì„œ ì¡°ë¦½í•˜ê³  í†µí•© í…ŒìŠ¤íŠ¸í•œë‹¤.
- **ì…ë ¥**: T001 ~ T005 ì‚°ì¶œë¬¼
- **ì¶œë ¥**:
  - `src/api/endpoints/websocket.py` (ì™„ì„±)
  - `tests/e2e/test_meeting_flow.py`
- **ì œì•½ ì‚¬í•­**:
  - **MUST**: `Receiver Task`(ì˜¤ë””ì˜¤ ìˆ˜ì‹ )ì™€ `Sender Task`(ê²°ê³¼ ì „ì†¡)ë¥¼ `asyncio.gather`ë¡œ ë³‘ë ¬ ì‹¤í–‰.
  - **MUST**: í•œ ì‚¬ìš©ìì˜ ì—ëŸ¬ê°€ ì „ì²´ ë°©ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ì£½ì´ì§€ ì•Šë„ë¡ ì˜ˆì™¸ ê²©ë¦¬.

------

